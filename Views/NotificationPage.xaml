<UserControl x:Class="FehlzeitApp.Views.NotificationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="900" d:DesignWidth="1200"
             Background="#F8F9FA">

    <UserControl.Resources>
        <!-- Modern Professional Button Styles -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#2563EB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="8" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1D4ED8"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="#9CA3AF"/>
                    <Setter Property="Cursor" Value="Arrow"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#1F2937"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F9FAFB"/>
                    <Setter Property="BorderBrush" Value="#9CA3AF"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="IconButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F3F4F6"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Border Background="White" CornerRadius="12" Margin="20">
            <Border.Effect>
                <DropShadowEffect Color="#000000" Opacity="0.08" ShadowDepth="0" BlurRadius="20"/>
            </Border.Effect>
            
            <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
                <Border Grid.Row="0" Background="#F8F9FA" CornerRadius="12,12,0,0" Padding="24,20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ”” Benachrichtigungen" FontSize="22" FontWeight="Bold" Foreground="#111827"/>
                                <Border Background="#EF4444" CornerRadius="12" Padding="8,4" Margin="12,0,0,0" 
                                        x:Name="UnreadBadge" Visibility="Collapsed">
                                    <TextBlock x:Name="TxtUnreadCount" Text="0" FontSize="12" FontWeight="Bold" 
                                               Foreground="White"/>
                                </Border>
                            </StackPanel>
                            <TextBlock Text="Verwalten Sie Ihre Benachrichtigungen" FontSize="13" Foreground="#6B7280" Margin="0,4,0,0"/>
        </StackPanel>

                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <Button x:Name="BtnRefresh" Content="ðŸ”„" Style="{StaticResource IconButton}" 
                                    Click="BtnRefresh_Click" ToolTip="Aktualisieren" Margin="0,0,8,0"/>
                            <Button x:Name="BtnMarkAllRead" Content="âœ“ Alle gelesen" Style="{StaticResource SecondaryButton}" 
                                    Click="BtnMarkAllRead_Click" Padding="12,8" Margin="0,0,8,0"/>
                            <Button x:Name="BtnDeleteAll" Content="ðŸ—‘ï¸ Alle lÃ¶schen" Style="{StaticResource SecondaryButton}" 
                                    Click="BtnDeleteAll_Click" Padding="12,8"/>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- Filter Section -->
                <Border Grid.Row="1" Background="White" Padding="24,16" BorderThickness="0,1,0,1" BorderBrush="#E5E7EB">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Filter:" FontSize="14" FontWeight="SemiBold" Foreground="#374151" 
                                   VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <ComboBox x:Name="CmbFilterType" Width="150" Height="38" Padding="12,0" FontSize="14"
                                  BorderBrush="#D1D5DB" BorderThickness="1" Margin="0,0,12,0"
                                  SelectionChanged="CmbFilterType_SelectionChanged">
                            <ComboBoxItem Content="Alle Typen" IsSelected="True"/>
                            <ComboBoxItem Content="Info"/>
                            <ComboBoxItem Content="Success"/>
                            <ComboBoxItem Content="Warning"/>
                            <ComboBoxItem Content="Error"/>
                        </ComboBox>
                        
                        <ComboBox x:Name="CmbFilterStatus" Width="150" Height="38" Padding="12,0" FontSize="14"
                                  BorderBrush="#D1D5DB" BorderThickness="1"
                                  SelectionChanged="CmbFilterStatus_SelectionChanged">
                            <ComboBoxItem Content="Alle Status" IsSelected="True"/>
                            <ComboBoxItem Content="Ungelesen"/>
                            <ComboBoxItem Content="Gelesen"/>
                        </ComboBox>
                    </StackPanel>
                </Border>
                
                <!-- Loading Indicator -->
                <StackPanel Grid.Row="2" x:Name="LoadingPanel" VerticalAlignment="Center" 
                            HorizontalAlignment="Center" Visibility="Collapsed">
                    <TextBlock Text="â³" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock Text="Lade Benachrichtigungen..." FontSize="16" Foreground="#6B7280" 
                               HorizontalAlignment="Center" Margin="0,8,0,0"/>
                </StackPanel>
                
                <!-- Empty State -->
                <StackPanel Grid.Row="2" x:Name="EmptyStatePanel" VerticalAlignment="Center" 
                            HorizontalAlignment="Center" Visibility="Collapsed">
                    <TextBlock Text="ðŸ“­" FontSize="72" HorizontalAlignment="Center" Opacity="0.3"/>
                    <TextBlock Text="Keine Benachrichtigungen" FontSize="18" FontWeight="SemiBold" 
                               Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,16,0,0"/>
                    <TextBlock Text="Sie haben derzeit keine Benachrichtigungen" 
                               FontSize="14" Foreground="#9CA3AF" TextAlignment="Center"
                               HorizontalAlignment="Center" Margin="0,8,0,0"/>
        </StackPanel>

                <!-- Notifications List -->
                <ScrollViewer Grid.Row="2" x:Name="NotificationsScrollViewer" 
                              VerticalScrollBarVisibility="Auto" Padding="24,16">
                    <ItemsControl x:Name="NotificationsListBox">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1" 
                                        CornerRadius="8" Margin="0,0,0,12" Padding="16">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsRead}" Value="False">
                                                    <Setter Property="Background" Value="#EFF6FF"/>
                                                    <Setter Property="BorderBrush" Value="#BFDBFE"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Type Icon -->
                                        <Border Grid.Column="0" Width="40" Height="40" CornerRadius="8" 
                                                Margin="0,0,16,0" VerticalAlignment="Top">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="#DBEAFE"/>
                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Type}" Value="Success">
                                                            <Setter Property="Background" Value="#D1FAE5"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Type}" Value="Warning">
                                                            <Setter Property="Background" Value="#FEF3C7"/>
                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Type}" Value="Error">
                                                            <Setter Property="Background" Value="#FEE2E2"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
                                            </Border.Style>
                                            <TextBlock Text="{Binding TypeIcon}" FontSize="20" 
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        
                                        <!-- Content -->
                                        <StackPanel Grid.Column="1">
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                                <TextBlock Text="{Binding Title}" FontSize="15" FontWeight="SemiBold" 
                                                           Foreground="#111827"/>
                                                <Border Background="#3B82F6" CornerRadius="4" Padding="6,2" Margin="8,0,0,0"
                                                        Visibility="{Binding IsUnreadBadgeVisible}">
                                                    <TextBlock Text="NEU" FontSize="10" FontWeight="Bold" Foreground="White"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="{Binding Message}" FontSize="13" Foreground="#6B7280" 
                                                       TextWrapping="Wrap" Margin="0,0,0,8"/>
                                            
                                            <!-- Employee and Project Info -->
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8" 
                                                        Visibility="{Binding HasEmployeeInfo}">
                                                <Border Background="#F3F4F6" CornerRadius="6" Padding="8,4" Margin="0,0,8,0">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="ðŸ‘¤" FontSize="12" Margin="0,0,4,0"/>
                                                        <TextBlock Text="{Binding MitarbeiterName}" FontSize="12" 
                                                                   FontWeight="Medium" Foreground="#374151"/>
                                                    </StackPanel>
                                                </Border>
                                                <Border Background="#F3F4F6" CornerRadius="6" Padding="8,4"
                                                        Visibility="{Binding HasObjektInfo}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="ðŸ¢" FontSize="12" Margin="0,0,4,0"/>
                                                        <TextBlock Text="{Binding ObjektName}" FontSize="12" 
                                                                   FontWeight="Medium" Foreground="#374151"/>
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                            
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ•" FontSize="11" Foreground="#9CA3AF" Margin="0,0,4,0"/>
                                                <TextBlock Text="{Binding CreatedAtString}" FontSize="11" 
                                                           Foreground="#9CA3AF"/>
                                                <TextBlock Text=" â€¢ " FontSize="11" Foreground="#9CA3AF" Margin="4,0"/>
                                                <TextBlock Text="{Binding RelatedEntityType}" FontSize="11" 
                                                           Foreground="#9CA3AF"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Actions -->
                                        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top">
                                            <Button Content="âœ“" Tag="{Binding}" Click="BtnMarkAsRead_Click" 
                                                    Style="{StaticResource IconButton}" ToolTip="Als gelesen markieren"
                                                    Visibility="{Binding MarkAsReadButtonVisibility}"/>
                                            <Button Content="ðŸ—‘ï¸" Tag="{Binding}" Click="BtnDelete_Click" 
                                                    Style="{StaticResource IconButton}" ToolTip="LÃ¶schen" Margin="4,0,0,0"/>
            </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
                
                <!-- Footer -->
                <Border Grid.Row="3" Background="#F8F9FA" CornerRadius="0,0,12,12" Padding="24,16" 
                        BorderThickness="0,1,0,0" BorderBrush="#E5E7EB">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Left: Record count -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock x:Name="TxtRecordCount" Text="0 Benachrichtigungen" FontSize="13" 
                                       Foreground="#6B7280" FontWeight="Medium"/>
                            <TextBlock Text=" | " FontSize="13" Foreground="#D1D5DB" Margin="8,0"/>
                            <TextBlock x:Name="TxtStatusMessage" Text="Bereit" FontSize="12" 
                                       Foreground="#9CA3AF"/>
                        </StackPanel>
                        
                        <!-- Center: Pagination controls -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" 
                                    VerticalAlignment="Center" Margin="16,0">
                            <Button x:Name="BtnPrevPage" Content="â—€" Style="{StaticResource SecondaryButton}" 
                                    Click="BtnPrevPage_Click" Padding="12,8" Margin="0,0,8,0" 
                                    ToolTip="Vorherige Seite"/>
                            <TextBlock x:Name="TxtPageInfo" Text="Seite 1 von 1" FontSize="13" 
                                       Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,8,0"
                                       MinWidth="100" TextAlignment="Center"/>
                            <Button x:Name="BtnNextPage" Content="â–¶" Style="{StaticResource SecondaryButton}" 
                                    Click="BtnNextPage_Click" Padding="12,8" 
                                    ToolTip="NÃ¤chste Seite"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>
