<Page x:Class="FehlzeitApp.Views.NotificationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Notifications - Hard Data">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="NOTIFICATIONS - HARD DATA" FontSize="24" FontWeight="Bold" Foreground="#2563eb"/>
            <TextBlock x:Name="CountText" Text="Total: 0" FontSize="16" Margin="20,5,0,0" Foreground="#dc2626"/>
        </StackPanel>

        <!-- Controls -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
            <Button x:Name="RefreshButton" Content="ðŸ”„ Refresh Now" 
                    Click="RefreshButton_Click" 
                    Padding="10,5" Margin="0,0,10,0"
                    Background="#10b981" Foreground="White" BorderThickness="0"/>
            
            <Button x:Name="ToggleAutoRefreshButton" Content="Stop Auto-Refresh" 
                    Click="ToggleAutoRefresh_Click" 
                    Padding="10,5" Margin="0,0,10,0"
                    Background="#f59e0b" Foreground="White" BorderThickness="0"/>
            
            <Button x:Name="CreateTestNotificationButton" Content="ðŸ§ª Create Test" 
                    Click="CreateTestNotification_Click" 
                    Padding="10,5" Margin="0,0,10,0"
                    Background="#8b5cf6" Foreground="White" BorderThickness="0"/>
        </StackPanel>

        <!-- Data Grid -->
        <DataGrid x:Name="NotificationGrid" Grid.Row="2" 
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False" 
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  AlternatingRowBackground="#f8fafc"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column">
            
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="USER ID" Binding="{Binding UserId}" Width="70"/>
                <DataGridTextColumn Header="TITLE" Binding="{Binding Title}" Width="200"/>
                <DataGridTextColumn Header="MESSAGE" Binding="{Binding Message}" Width="300"/>
                <DataGridTextColumn Header="TYPE" Binding="{Binding Type}" Width="80"/>
                <DataGridTextColumn Header="STATUS" Binding="{Binding Status}" Width="80"/>
                <DataGridTextColumn Header="CREATED AT" Binding="{Binding CreatedAtString}" Width="150"/>
                <DataGridTextColumn Header="ENTITY TYPE" Binding="{Binding RelatedEntityType}" Width="100"/>
                <DataGridTextColumn Header="ENTITY ID" Binding="{Binding RelatedEntityId}" Width="80"/>
            </DataGrid.Columns>

            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Type}" Value="Error">
                            <Setter Property="Background" Value="#fee2e2"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Type}" Value="Warning">
                            <Setter Property="Background" Value="#fef3c7"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Type}" Value="Info">
                            <Setter Property="Background" Value="#dbeafe"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsRead}" Value="False">
                            <Setter Property="FontWeight" Value="Bold"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="#f1f5f9" Padding="10" Margin="0,10,0,0">
            <StackPanel>
                <TextBlock x:Name="StatusText" Text="Ready" FontFamily="Consolas" Foreground="#475569"/>
                <TextBlock Text="Auto-refreshes every 5 seconds | WebAPI: http://localhost:5000" 
                           FontSize="10" Foreground="#64748b" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>
